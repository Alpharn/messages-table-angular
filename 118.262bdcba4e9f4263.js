"use strict";(self.webpackChunkmessages_table=self.webpackChunkmessages_table||[]).push([[118],{4118:(se,M,o)=>{o.r(M),o.d(M,{MessageModule:()=>ne});var p=o(6814),b=o(649),P=o(8645),y=o(9773),c=o(5313),f=o(3566),Z=o(830),l=o(6223),e=o(5879),g=o(7700),h=o(5683),r=o(2296),A=o(4516),v=o(6263),_=o(1175);function D(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name is required"),e.qZA())}function O(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name cannot be more than 100 characters"),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Message is required"),e.qZA())}let I=(()=>{class t{constructor(a,n){this.fb=a,this.dialogRef=n,this.messageForm=this.fb.group({name:["",[l.kI.required]],message:["",[l.kI.required]]})}onSubmit(){if(this.messageForm.valid){const a={...this.messageForm.value,date:(new Date).toLocaleString()};this.dialogRef.close({type:"create",data:a})}}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(l.qu),e.Y36(g.so))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-message-add-dialog"]],decls:24,vars:5,consts:[[1,"dialog-container"],[1,"close-btn"],["mat-mini-fab","","mat-dialog-close","","cdkFocusInitial","",1,"close-icon"],[1,"dialog-form",3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"dialog-title"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Name","formControlName","name","maxlength","100"],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","minlength","1","maxlength","255","placeholder","Message","formControlName","message"],["autosize","cdkTextareaAutosize"],["mat-fab","","extended","","color","primary","type","submit",1,"submit-btn",3,"disabled"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"mat-dialog-actions",1)(2,"button",2)(3,"mat-icon"),e._uU(4,"close"),e.qZA()()(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(6,"h2",4),e._uU(7," New Message "),e.qZA(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Name:"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,D,2,0,"mat-error",7),e.YNc(13,O,2,0,"mat-error",7),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Message:"),e.qZA(),e.TgZ(17,"textarea",8,9),e._uU(19,"        "),e.qZA(),e.YNc(20,S,2,0,"mat-error",7),e.qZA(),e.TgZ(21,"mat-dialog-actions")(22,"button",10),e._uU(23,"Submit"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",s.messageForm),e.xp6(7),e.Q6J("ngIf",s.messageForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.messageForm.get("name").hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",s.messageForm.get("message").hasError("required")),e.xp6(2),e.Q6J("disabled",s.messageForm.invalid))},dependencies:[p.O5,h.KE,h.hX,h.TO,l._Y,l.Fj,l.JJ,l.JL,l.wO,l.nD,l.sg,l.u,g.ZT,g.uh,g.H8,r.nh,r.cs,A.Nt,v.IC,_.Hw],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.dialog-title[_ngcontent-%COMP%]{font-size:20px}.close-icon[_ngcontent-%COMP%]{background-color:#1d4a5e;margin:0 10px}.close-btn[_ngcontent-%COMP%]{margin-left:auto}.submit-btn[_ngcontent-%COMP%]:not(:disabled){margin-bottom:20px;width:130px;background-color:#9b4577}.submit-btn[_ngcontent-%COMP%]:disabled{margin-bottom:20px;width:130px}"]})}return t})(),N=(()=>{class t{constructor(a,n){this.dialogRef=a,this.data=n}deleteMessage(){this.dialogRef.close({type:"delete",data:this.data.message})}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(g.so),e.Y36(g.WI))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-message-delete-dialog"]],decls:13,vars:0,consts:[[1,"dialog-container"],[1,"close-btn"],["mat-mini-fab","","mat-dialog-close","","cdkFocusInitial","",1,"close-icon"],["mat-dialog-title","",1,"dialog-title"],["mat-fab","","extended","","cdkFocusInitial","",1,"delete-btn",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"mat-dialog-actions",1)(2,"button",2)(3,"mat-icon"),e._uU(4,"close"),e.qZA()()(),e.TgZ(5,"h2",3),e._uU(6,"Confirm Deletion"),e.qZA(),e.TgZ(7,"mat-dialog-content")(8,"p"),e._uU(9,"Are you sure you want to delete this message?"),e.qZA()(),e.TgZ(10,"mat-dialog-actions")(11,"button",4),e.NdJ("click",function(){return s.deleteMessage()}),e._uU(12,"Delete"),e.qZA()()())},dependencies:[g.ZT,g.uh,g.xY,g.H8,r.nh,r.cs,_.Hw],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.dialog-title[_ngcontent-%COMP%]{font-size:20px}.close-icon[_ngcontent-%COMP%]{background-color:#1d4a5e;margin:0 10px}.close-btn[_ngcontent-%COMP%]{margin-left:auto}.delete-btn[_ngcontent-%COMP%]{background-color:#9b4577;width:130px;margin-bottom:20px}"]})}return t})();var x=o(1047),d=o(4221);const u=(0,d.ZF)("messages"),Y=(0,d.P1)(u,t=>t.messages),z=(0,d.P1)(u,t=>t.loading),w=((0,d.P1)(u,t=>t.error),(0,d.P1)(u,t=>t.isSubmitting)),T="400px";let q=(()=>{class t{constructor(){this.pageIndex=0,this.pageSize=10}setPageIndex(a){this.pageIndex=a}setPageSize(a){this.pageSize=a}getPageIndex(){return this.pageIndex}getPageSize(){return this.pageSize}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var J=o(5940),Q=o(2247);function F(t,i){1&t&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",19),e.qZA())}function R(t,i){1&t&&(e.TgZ(0,"mat-header-cell",20),e._uU(1,"ID"),e.qZA())}function H(t,i){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.id)}}function k(t,i){1&t&&(e.TgZ(0,"mat-header-cell",20),e._uU(1,"Name"),e.qZA())}function $(t,i){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.name)}}function L(t,i){1&t&&(e.TgZ(0,"mat-header-cell",20),e._uU(1,"Message"),e.qZA())}function E(t,i){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.message.slice(0,100))}}function B(t,i){1&t&&(e.TgZ(0,"mat-header-cell",20),e._uU(1,"Date"),e.qZA())}function G(t,i){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,a.date,"dd/MM/yyyy HH:mm:ss"))}}function j(t,i){1&t&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Actions"),e.qZA())}function X(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"mat-cell")(1,"button",21),e.NdJ("click",function(){const m=e.CHM(a).$implicit,C=e.oxw();return e.KtG(C.openDeleteMessageDialog(m))}),e.TgZ(2,"mat-icon",22),e._uU(3,"delete"),e.qZA()()()}}function K(t,i){1&t&&e._UZ(0,"mat-header-row")}function W(t,i){1&t&&e._UZ(0,"mat-row")}function V(t,i){1&t&&(e.TgZ(0,"h2",24),e._uU(1,"There's no messages yet"),e.qZA())}function ee(t,i){if(1&t&&(e.ynx(0),e.YNc(1,V,2,0,"h2",23),e.BQk()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",0===a.messages.data.length)}}const te=function(){return[5,10,20]},ae=[{path:"",component:(()=>{class t{constructor(a,n,s){this.dialog=a,this.store=n,this.paginationService=s,this.displayedColumns=["id","name","message","date","action"],this.isLoading$=this.store.select(z),this.isSubmitting$=this.store.select(w),this.destroy$=new P.x}ngOnInit(){this.store.dispatch((0,x.EV)()),this.store.select(Y).pipe((0,y.R)(this.destroy$)).subscribe(a=>{this.messages=new c.by(a),this.messages.sort=this.sort,this.messages.paginator=this.paginator,this.paginator.pageIndex=this.paginationService.getPageIndex(),this.paginator.pageSize=this.paginationService.getPageSize()})}openAddMessageDialog(){this.dialog.open(I,{width:T}).afterClosed().subscribe(n=>{n&&this.store.dispatch((0,x.Hz)({message:n.data}))})}openDeleteMessageDialog(a){this.dialog.open(N,{width:T,data:{message:a}}).afterClosed().subscribe(s=>{s&&this.store.dispatch((0,x.$Z)({id:s.data.id}))})}updateRoute(a){this.paginationService.setPageIndex(a.pageIndex),this.paginationService.setPageSize(a.pageSize)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(g.uw),e.Y36(d.yh),e.Y36(q))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-messages-page"]],viewQuery:function(n,s){if(1&n&&(e.Gf(f.YE,7),e.Gf(Z.NW,7)),2&n){let m;e.iGM(m=e.CRH())&&(s.sort=m.first),e.iGM(m=e.CRH())&&(s.paginator=m.first)}},decls:31,vars:15,consts:[[1,"wrapper"],["mat-fab","","extended","","color","primary",1,"create-msg",3,"click"],["iconPositionEnd","",1,"add-icon"],["class","spinner-container",4,"ngIf"],[1,"table-container"],["matSort","","matSortActive","date","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","message"],["matColumnDef","date"],["matColumnDef","action"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],[1,"spinner-container"],["diameter","80"],["mat-sort-header",""],["mat-icon-button","",1,"delete-btn",3,"click"],[1,"delete-icon"],["class","no-msg",4,"ngIf"],[1,"no-msg"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navbar"),e.TgZ(2,"button",1),e.NdJ("click",function(){return s.openAddMessageDialog()}),e._uU(3," Create Message "),e.TgZ(4,"mat-icon",2),e._uU(5,"add"),e.qZA()(),e.YNc(6,F,2,0,"div",3),e.ALo(7,"async"),e.ALo(8,"async"),e.TgZ(9,"div",4)(10,"mat-table",5),e.ynx(11,6),e.YNc(12,R,2,0,"mat-header-cell",7),e.YNc(13,H,2,1,"mat-cell",8),e.BQk(),e.ynx(14,9),e.YNc(15,k,2,0,"mat-header-cell",7),e.YNc(16,$,2,1,"mat-cell",8),e.BQk(),e.ynx(17,10),e.YNc(18,L,2,0,"mat-header-cell",7),e.YNc(19,E,2,1,"mat-cell",8),e.BQk(),e.ynx(20,11),e.YNc(21,B,2,0,"mat-header-cell",7),e.YNc(22,G,3,4,"mat-cell",8),e.BQk(),e.ynx(23,12),e.YNc(24,j,2,0,"mat-header-cell",13),e.YNc(25,X,4,0,"mat-cell",8),e.BQk(),e.YNc(26,K,1,0,"mat-header-row",14),e.YNc(27,W,1,0,"mat-row",15),e.qZA(),e.YNc(28,ee,2,1,"ng-container",16),e.ALo(29,"async"),e.TgZ(30,"mat-paginator",17),e.NdJ("page",function(C){return s.updateRoute(C)}),e.qZA()()()),2&n&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,8,s.isLoading$)||e.lcZ(8,10,s.isSubmitting$)),e.xp6(4),e.Q6J("dataSource",s.messages),e.xp6(16),e.Q6J("matHeaderRowDef",s.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",s.displayedColumns),e.xp6(1),e.Q6J("ngIf",!e.lcZ(29,12,s.isLoading$)),e.xp6(2),e.Q6J("pageIndex",s.paginator.pageIndex)("pageSize",s.paginator.pageSize)("pageSizeOptions",e.DdM(14,te)))},dependencies:[p.O5,r.RK,r.cs,J.Ou,Z.NW,_.Hw,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,Q.S,p.Ov,p.uU],styles:[".wrapper[_ngcontent-%COMP%]{width:1400px;margin:0 auto}.create-msg[_ngcontent-%COMP%]{margin-bottom:20px;background-color:#9b4577}.delete-btn[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{color:#dd2c64}.delete-btn[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{color:#4c4c4c}.spinner[_ngcontent-%COMP%]{margin:20px auto}.mat-mdc-progress-spinner[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #9b4577}.spinner-container[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#1c1c1c4d;z-index:100;display:flex;justify-content:center;align-items:center}.mat-mdc-paginator[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.no-msg[_ngcontent-%COMP%]{font-weight:400}"]})}return t})()}];let ne=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#a=this.\u0275inj=e.cJS({imports:[p.ez,b.Bz.forChild(ae)]})}return t})()}}]);