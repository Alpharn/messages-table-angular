"use strict";(self.webpackChunkmessages_table=self.webpackChunkmessages_table||[]).push([[453],{453:(ne,C,i)=>{i.r(C),i.d(C,{LazyLoadingModule:()=>ae});var M=i(649),v=i(8645),P=i(9773),c=i(5313),u=i(3566),Z=i(830),m=i(6223),l=i(7700),e=i(5879),d=i(6814),f=i(5683),p=i(2296),y=i(4516),D=i(6263),T=i(1175);function A(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name is required"),e.qZA())}function I(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name cannot be more than 100 characters"),e.qZA())}function N(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Message is required"),e.qZA())}function S(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"div",1)(1,"mat-dialog-actions",2)(2,"button",3)(3,"mat-icon"),e._uU(4,"close"),e.qZA()()(),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(6,"h2",5),e._uU(7," New Message "),e.qZA(),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Name:"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,A,2,0,"mat-error",8),e.YNc(13,I,2,0,"mat-error",8),e.qZA(),e.TgZ(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Message:"),e.qZA(),e.TgZ(17,"textarea",9,10),e._uU(19,"        "),e.qZA(),e.YNc(20,N,2,0,"mat-error",8),e.qZA(),e.TgZ(21,"mat-dialog-actions")(22,"button",11),e._uU(23,"Submit"),e.qZA()()()()}if(2&t){const a=e.oxw();e.xp6(5),e.Q6J("formGroup",a.messageForm),e.xp6(7),e.Q6J("ngIf",a.messageForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.messageForm.get("name").hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",a.messageForm.get("message").hasError("required")),e.xp6(2),e.Q6J("disabled",a.messageForm.invalid)}}function U(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"div",1)(1,"mat-dialog-actions",2)(2,"button",3)(3,"mat-icon"),e._uU(4,"close"),e.qZA()()(),e.TgZ(5,"h2",5),e._uU(6,"Confirm Deletion"),e.qZA(),e.TgZ(7,"mat-dialog-content")(8,"p"),e._uU(9,"Are you sure you want to delete this message?"),e.qZA()(),e.TgZ(10,"mat-dialog-actions")(11,"button",12),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.deleteMessage())}),e._uU(12,"Delete"),e.qZA()()()}}let b=(()=>{class t{constructor(a,o,n){this.fb=a,this.dialogRef=o,this.data=n,this.isDeleteMode=!1,this.messageForm=this.fb.group({name:["",[m.kI.required]],message:["",[m.kI.required]]}),n&&n.isDeleteMode&&(this.isDeleteMode=!0)}onSubmit(){if(this.messageForm.valid){const a={...this.messageForm.value,date:(new Date).toLocaleString()};this.dialogRef.close({type:"create",data:a})}}deleteMessage(){this.dialogRef.close({type:"delete",data:this.data.message})}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(m.qu),e.Y36(l.so),e.Y36(l.WI))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-message-dialog"]],decls:2,vars:2,consts:[["class","dialog-container",4,"ngIf"],[1,"dialog-container"],[1,"close-btn"],["mat-mini-fab","","mat-dialog-close","","cdkFocusInitial","",1,"close-icon"],[1,"dialog-form",3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"dialog-title"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Name","formControlName","name","maxlength","100"],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","minlength","1","maxlength","255","placeholder","Message","formControlName","message"],["autosize","cdkTextareaAutosize"],["mat-fab","","extended","","color","primary","type","submit",1,"submit-btn",3,"disabled"],["mat-fab","","extended","","cdkFocusInitial","",1,"delete-btn",3,"click"]],template:function(o,n){1&o&&(e.YNc(0,S,24,5,"div",0),e.YNc(1,U,13,0,"div",0)),2&o&&(e.Q6J("ngIf",!n.isDeleteMode),e.xp6(1),e.Q6J("ngIf",n.isDeleteMode))},dependencies:[d.O5,f.KE,f.hX,f.TO,m._Y,m.Fj,m.JJ,m.JL,m.wO,m.nD,m.sg,m.u,l.ZT,l.uh,l.xY,l.H8,p.nh,p.cs,y.Nt,D.IC,T.Hw],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.dialog-title[_ngcontent-%COMP%]{font-size:20px}.close-icon[_ngcontent-%COMP%]{background-color:#1d4a5e;margin:0 10px}.close-btn[_ngcontent-%COMP%]{margin-left:auto}.submit-btn[_ngcontent-%COMP%]:not(:disabled){margin-bottom:20px;width:130px;background-color:#9b4577}.submit-btn[_ngcontent-%COMP%]:disabled{margin-bottom:20px;width:130px}.delete-btn[_ngcontent-%COMP%]{background-color:#9b4577;width:130px;margin-bottom:20px}"]})}return t})();var h=i(110),r=i(4221);const _=(0,r.ZF)("messages"),Y=(0,r.P1)(_,t=>t.messages),z=(0,r.P1)(_,t=>t.loading);(0,r.P1)(_,t=>t.error);let w=(()=>{class t{constructor(){this.pageIndex=0,this.pageSize=10}setPageIndex(a){this.pageIndex=a}setPageSize(a){this.pageSize=a}getPageIndex(){return this.pageIndex}getPageSize(){return this.pageSize}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var J=i(5940),Q=i(953);function q(t,s){1&t&&(e.TgZ(0,"mat-header-cell",18),e._uU(1,"ID"),e.qZA())}function F(t,s){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.Oqu(a.id)}}function H(t,s){1&t&&(e.TgZ(0,"mat-header-cell",18),e._uU(1,"Name"),e.qZA())}function R(t,s){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.Oqu(a.name)}}function L(t,s){1&t&&(e.TgZ(0,"mat-header-cell",18),e._uU(1,"Message"),e.qZA())}function $(t,s){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.Oqu(a.message.slice(0,100))}}function k(t,s){1&t&&(e.TgZ(0,"mat-header-cell",18),e._uU(1,"Date"),e.qZA())}function E(t,s){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,a.date,"dd/MM/yyyy HH:mm:ss"))}}function B(t,s){1&t&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Actions"),e.qZA())}function G(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"mat-cell")(1,"button",19),e.NdJ("click",function(){const g=e.CHM(a).$implicit,x=e.oxw();return e.KtG(x.openDialog(g))}),e.TgZ(2,"mat-icon",20),e._uU(3,"delete"),e.qZA()()()}}function K(t,s){1&t&&e._UZ(0,"mat-header-row")}function j(t,s){1&t&&e._UZ(0,"mat-row")}function X(t,s){1&t&&(e.TgZ(0,"h2",22),e._uU(1,"There's no messages yet"),e.qZA())}function W(t,s){if(1&t&&(e.ynx(0),e.YNc(1,X,2,0,"h2",21),e.BQk()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",0===a.messages.data.length)}}function V(t,s){1&t&&e._UZ(0,"mat-spinner",23)}const ee=function(){return[5,10,20]},te=[{path:"",component:(()=>{class t{constructor(a,o,n){this.dialog=a,this.store=o,this.paginationService=n,this.displayedColumns=["id","name","message","date","action"],this.isLoading$=this.store.select(z),this.destroy$=new v.x}ngOnInit(){this.store.dispatch((0,h.EV)()),this.store.select(Y).pipe((0,P.R)(this.destroy$)).subscribe(a=>{this.messages=new c.by(a),this.messages.sort=this.sort,this.messages.paginator=this.paginator,this.paginator.pageIndex=this.paginationService.getPageIndex(),this.paginator.pageSize=this.paginationService.getPageSize()})}openDialog(a=null){let o;o=this.dialog.open(b,a?{width:"400px",data:{message:a,isDeleteMode:!0}}:{width:"400px"}),o.afterClosed().subscribe(n=>{n&&("create"===n.type?this.store.dispatch((0,h.Hz)({message:n.data})):"delete"===n.type&&this.store.dispatch((0,h.$Z)({id:n.data.id})))})}updateRoute(a){this.paginationService.setPageIndex(a.pageIndex),this.paginationService.setPageSize(a.pageSize)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(l.uw),e.Y36(r.yh),e.Y36(w))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-messages-page"]],viewQuery:function(o,n){if(1&o&&(e.Gf(u.YE,7),e.Gf(Z.NW,7)),2&o){let g;e.iGM(g=e.CRH())&&(n.sort=g.first),e.iGM(g=e.CRH())&&(n.paginator=g.first)}},decls:30,vars:13,consts:[[1,"wrapper"],["mat-fab","","extended","","color","primary",1,"create-msg",3,"click"],["iconPositionEnd","",1,"add-icon"],[1,"table-container"],["matSort","","matSortActive","date","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","message"],["matColumnDef","date"],["matColumnDef","action"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","spinner","diameter","80",4,"ngIf"],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["mat-sort-header",""],["mat-icon-button","",1,"delete-btn",3,"click"],[1,"delete-icon"],["class","no-msg",4,"ngIf"],[1,"no-msg"],["diameter","80",1,"spinner"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-navbar"),e.TgZ(2,"button",1),e.NdJ("click",function(){return n.openDialog()}),e._uU(3," Create Message "),e.TgZ(4,"mat-icon",2),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",3)(7,"mat-table",4),e.ynx(8,5),e.YNc(9,q,2,0,"mat-header-cell",6),e.YNc(10,F,2,1,"mat-cell",7),e.BQk(),e.ynx(11,8),e.YNc(12,H,2,0,"mat-header-cell",6),e.YNc(13,R,2,1,"mat-cell",7),e.BQk(),e.ynx(14,9),e.YNc(15,L,2,0,"mat-header-cell",6),e.YNc(16,$,2,1,"mat-cell",7),e.BQk(),e.ynx(17,10),e.YNc(18,k,2,0,"mat-header-cell",6),e.YNc(19,E,3,4,"mat-cell",7),e.BQk(),e.ynx(20,11),e.YNc(21,B,2,0,"mat-header-cell",12),e.YNc(22,G,4,0,"mat-cell",7),e.BQk(),e.YNc(23,K,1,0,"mat-header-row",13),e.YNc(24,j,1,0,"mat-row",14),e.qZA(),e.YNc(25,W,2,1,"ng-container",15),e.ALo(26,"async"),e.YNc(27,V,1,0,"mat-spinner",16),e.ALo(28,"async"),e.TgZ(29,"mat-paginator",17),e.NdJ("page",function(x){return n.updateRoute(x)}),e.qZA()()()),2&o&&(e.xp6(7),e.Q6J("dataSource",n.messages),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("ngIf",!e.lcZ(26,8,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(28,10,n.isLoading$)),e.xp6(2),e.Q6J("pageIndex",n.paginator.pageIndex)("pageSize",n.paginator.pageSize)("pageSizeOptions",e.DdM(12,ee)))},dependencies:[d.O5,p.RK,p.cs,J.Ou,Z.NW,T.Hw,u.YE,u.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,Q.S,d.Ov,d.uU],styles:[".wrapper[_ngcontent-%COMP%]{width:1400px;margin:0 auto}.create-msg[_ngcontent-%COMP%]{margin-bottom:20px;background-color:#9b4577}.delete-btn[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{color:#dd2c64}.delete-btn[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{color:#4c4c4c}.spinner[_ngcontent-%COMP%]{margin:20px auto}.mat-mdc-progress-spinner[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #9b4577}.mat-mdc-paginator[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.no-msg[_ngcontent-%COMP%]{font-weight:400}"]})}return t})()}];let ae=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#a=this.\u0275inj=e.cJS({imports:[M.Bz.forChild(te),M.Bz]})}return t})()}}]);